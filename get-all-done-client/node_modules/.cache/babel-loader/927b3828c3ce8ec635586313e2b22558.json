{"ast":null,"code":"const API_ROOT = `http://localhost:3000/api/v1`;\nconst token = localStorage.getItem('token');\nconst headers = {\n  'Content-Type': 'application/json',\n  Accepts: 'application/json',\n  Authorization: token\n};\n\nconst login = data => {\n  return fetch(`${API_ROOT}/auth`, {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(data)\n  }).then(resp => resp.json());\n};\n\nconst getCurrentUser = () => {\n  console.log(\"getting current user\", headers);\n  return fetch(`${API_ROOT}/current_user`, {\n    headers\n  }).then(res => {\n    console.log(res);\n    return res.json();\n  });\n};\n\nconst createUser = data => {\n  fetch(URL + \"/users\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"Application/json\",\n      Accept: \"Application/json\"\n    },\n    body: JSON.stringify({\n      username: data.username,\n      email: data.email,\n      city: data.city,\n      country: data.country,\n      phone: data.phone,\n      contractee: data.contractee,\n      contractor: data.contractor\n    })\n  }).then(response => response.json()).then(user => {\n    console.log(user);\n\n    if (user.contractor) {\n      createContractor(user, data); // .then(currentUser => {\n      //     onSetCurrentUser(\"contractor\")\n      // })\n    } else {\n      createContractee(user, data); //         .then(currentUser => {\n      //             onSetCurrentUser(\"contractee\")\n      //         })\n    }\n  }).then(this.setState({\n    username: \"\",\n    email: \"\",\n    phone: 0,\n    country: \"\",\n    city: \"\",\n    contractee: false,\n    contractor: false,\n    password: \"\"\n  }));\n};\n\nconst createContractor = (user, data) => {\n  fetch(URL + \"/contractors\", {\n    method: \"POST\",\n    headers,\n    body: JSON.stringify({\n      user_id: user.id,\n      projects_completed: 0,\n      password: data.password,\n      services: data.services\n    })\n  }).then(response => response.json());\n};\n\nconst createContractee = (user, data) => {\n  fetch(URL + \"/contractees\", {\n    method: \"POST\",\n    headers,\n    body: JSON.stringify({\n      user_id: user.id,\n      password: data.password\n    })\n  }).then(response => response.json());\n};\n\nexport const api = {\n  auth: {\n    login,\n    getCurrentUser\n  },\n  // paintings: {\n  //   getPaintings\n  // }\n  user: {\n    createUser\n  }\n};","map":{"version":3,"sources":["/Users/flatironschool/Desktop/G_A_D-project/G_A_D-get-all-done-frontend/get-all-done-client/src/services/api.js"],"names":["API_ROOT","token","localStorage","getItem","headers","Accepts","Authorization","login","data","fetch","method","body","JSON","stringify","then","resp","json","getCurrentUser","console","log","res","createUser","URL","Accept","username","email","city","country","phone","contractee","contractor","response","user","createContractor","createContractee","setState","password","user_id","id","projects_completed","services","api","auth"],"mappings":"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","sourcesContent":["const API_ROOT = `http://localhost:3000/api/v1`;\nconst token = localStorage.getItem('token');\n\nconst headers = {\n    'Content-Type': 'application/json',\n    Accepts: 'application/json',\n    Authorization: token\n};\n\n\nconst login = data => {\n    return fetch(`${API_ROOT}/auth`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(data)\n    }).then(resp => resp.json());\n};\n\nconst getCurrentUser = () => {\n    console.log(\"getting current user\", headers)\n    return fetch(`${API_ROOT}/current_user`, {\n        headers\n    }).then(res => {\n        console.log(res)\n        return res.json()\n    });\n};\n\nconst createUser = (data) => {\n    fetch(URL + \"/users\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"Application/json\",\n            Accept: \"Application/json\"\n        },\n        body: JSON.stringify({\n            username: data.username,\n            email: data.email,\n            city: data.city,\n            country: data.country,\n            phone: data.phone,\n            contractee: data.contractee,\n            contractor: data.contractor\n        })\n    })\n        .then(response => response.json())\n        .then(user => {\n            console.log(user);\n            if (user.contractor) {\n                createContractor(user, data)\n                // .then(currentUser => {\n                //     onSetCurrentUser(\"contractor\")\n                // })\n            } else {\n                createContractee(user, data)\n                //         .then(currentUser => {\n                //             onSetCurrentUser(\"contractee\")\n                //         })\n            }\n        })\n        .then(this.setState({\n            username: \"\",\n            email: \"\",\n            phone: 0,\n            country: \"\",\n            city: \"\",\n            contractee: false,\n            contractor: false,\n            password: \"\"\n        }))\n}\n\nconst createContractor = (user, data) => {\n    fetch(URL + \"/contractors\", {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify({\n            user_id: user.id,\n            projects_completed: 0,\n            password: data.password,\n            services: data.services\n        })\n    })\n        .then(response => response.json())\n}\n\nconst createContractee = (user, data) => {\n    fetch(URL + \"/contractees\", {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify({\n            user_id: user.id,\n            password: data.password\n        })\n    })\n        .then(response => response.json())\n}\nexport const api = {\n    auth: {\n        login,\n        getCurrentUser\n    },\n    // paintings: {\n    //   getPaintings\n    // }\n    user: {\n        createUser\n    }\n};\n"]},"metadata":{},"sourceType":"module"}