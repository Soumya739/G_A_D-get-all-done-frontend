{"ast":null,"code":"import _objectSpread from \"/Users/flatironschool/Desktop/G_A_D-project/G_A_D-get-all-done-frontend/get-all-done-client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/flatironschool/Desktop/G_A_D-project/G_A_D-get-all-done-frontend/get-all-done-client/src/containers/LoginForm.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { api } from '../services/api';\nconst Contractees_URL = \"http://localhost:3000/contractees\";\nconst Contractors_URL = \"http://localhost:3000/contractors\";\nexport class LoginForm extends Component {\n  // let { onSetCurrentUser, onLoggedIn, login, onLogin} = this.props\n  // let {loginAs } = this.state\n  //  let {email, password} = this.state.fields\n  constructor() {\n    super();\n\n    this.handleChange = e => {\n      const newFields = _objectSpread({}, this.state.fields, {\n        [e.target.name]: e.target.value\n      });\n\n      this.setState({\n        fields: newFields\n      });\n    };\n\n    this.formSubmittion = e => {\n      e.preventDefault();\n      let _this$props = this.props,\n          onSetCurrentUser = _this$props.onSetCurrentUser,\n          onLoggedIn = _this$props.onLoggedIn,\n          onLogin = _this$props.onLogin;\n      let loginAs = this.state.loginAs;\n      api.auth.login(this.state.fields).then(res => {\n        if (!res.error) {\n          const updatedState = _objectSpread({}, this.state.auth, {\n            user: res\n          });\n\n          this.props.onLogin(res);\n          this.props.history.push('/');\n        } else {\n          this.setState({\n            error: true\n          });\n        }\n      });\n      onSetCurrentUser(loginAs);\n      onLoggedIn();\n    };\n\n    this.handlePersonSelection = e => {\n      this.setState({\n        loginAs: e.target.value\n      });\n    };\n\n    this.getUser = () => {\n      let loginAs = this.state.loginAs;\n\n      if (loginAs === \"contractee\") {\n        fetch(Contractees_URL).then(resp => resp.json()).then(contractees => this.getContracteeData(contractees));\n      } else if (loginAs === \"contractor\") {\n        fetch(Contractors_URL).then(resp => resp.json()).then(contractors => this.getContractorData(contractors));\n      }\n    };\n\n    this.getContracteeData = () => {// fetch contractees\n      // map and see for current user\n    };\n\n    this.getContractorData = () => {// fetch contractors\n      // map and see for current user\n    };\n\n    this.state = {\n      error: false,\n      fields: {\n        email: '',\n        password: ''\n      },\n      loginAs: \"\"\n    };\n  }\n\n  render() {\n    let login = this.props.login;\n    let _this$state$fields = this.state.fields,\n        email = _this$state$fields.email,\n        password = _this$state$fields.password;\n\n    if (login === false) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, this.state.error ? React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Try again...\") : null, React.createElement(\"form\", {\n        onSubmit: e => this.formSubmittion(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"E-mail:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"email\",\n        placeholder: \"email\",\n        onChange: e => this.handleChange(e),\n        value: email,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"password:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"password\",\n        onChange: e => this.handleChange(e),\n        value: password,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(\"select\", {\n        onChange: e => this.handlePersonSelection(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        selected: true,\n        disabled: true,\n        hidden: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Choose Here\"), React.createElement(\"option\", {\n        value: \"contractee\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Contractee\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"option\", {\n        value: \"contractor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Contractor\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      })));\n    }\n  }\n\n}\nexport default LoginForm;","map":{"version":3,"sources":["/Users/flatironschool/Desktop/G_A_D-project/G_A_D-get-all-done-frontend/get-all-done-client/src/containers/LoginForm.js"],"names":["React","Component","Redirect","api","Contractees_URL","Contractors_URL","LoginForm","constructor","handleChange","e","newFields","state","fields","target","name","value","setState","formSubmittion","preventDefault","props","onSetCurrentUser","onLoggedIn","onLogin","loginAs","auth","login","then","res","error","updatedState","user","history","push","handlePersonSelection","getUser","fetch","resp","json","contractees","getContracteeData","contractors","getContractorData","email","password","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom';\nimport { api } from '../services/api';\n\nconst Contractees_URL = \"http://localhost:3000/contractees\"\nconst Contractors_URL = \"http://localhost:3000/contractors\"\n\nexport class LoginForm extends Component {\n    // let { onSetCurrentUser, onLoggedIn, login, onLogin} = this.props\n    // let {loginAs } = this.state\n    //  let {email, password} = this.state.fields\n    constructor() {\n        super()\n        this.state = {\n            error: false,\n            fields: {\n                email: '',\n                password: ''\n            },\n            loginAs: \"\",\n        }\n    }\n\n    handleChange = e => {\n        const newFields = { ...this.state.fields, [e.target.name]: e.target.value };\n        this.setState({ fields: newFields });\n    };\n\n    formSubmittion = (e) => {\n        e.preventDefault()\n        let { onSetCurrentUser, onLoggedIn, onLogin } = this.props\n        let { loginAs } = this.state\n        api.auth.login(this.state.fields).then(res => {\n            if (!res.error) {\n                const updatedState = { ...this.state.auth, user: res };\n                this.props.onLogin(res);\n                this.props.history.push('/');\n            } else {\n                this.setState({ error: true });\n            }\n        });\n        onSetCurrentUser(loginAs)\n        onLoggedIn()\n    }\n\n    handlePersonSelection = (e) => {\n        this.setState({ loginAs: e.target.value })\n    }\n\n    getUser = () => {\n        let { loginAs } = this.state\n        if (loginAs === \"contractee\") {\n            fetch(Contractees_URL)\n                .then(resp => resp.json())\n                .then(contractees => this.getContracteeData(contractees))\n        } else if (loginAs === \"contractor\") {\n            fetch(Contractors_URL)\n                .then(resp => resp.json())\n                .then(contractors => this.getContractorData(contractors))\n        }\n    }\n\n    getContracteeData = () => {\n        // fetch contractees\n        // map and see for current user\n    }\n    getContractorData = () => {\n        // fetch contractors\n        // map and see for current user\n    }\n\n    render() {\n        let { login } = this.props\n        let { email, password } = this.state.fields\n        if (login === false) {\n            return <Redirect to='/' />\n        } else {\n            return (\n                <div>\n                    {this.state.error ? <h1>Try again...</h1> : null}\n                    <form onSubmit={(e) => this.formSubmittion(e)}>\n                        <label>E-mail:</label><br />\n                        <input type='text' name=\"email\" placeholder='email' onChange={(e) => this.handleChange(e)} value={email} required /><br />\n                        <label>password:</label><br />\n                        <input type='password' name=\"password\" placeholder='password' onChange={(e) => this.handleChange(e)} value={password} required /><br />\n                        <select onChange={(e) => this.handlePersonSelection(e)}>\n                            <option value=\"\" selected disabled hidden>Choose Here</option>\n                            <option value='contractee'>Contractee</option><br />\n                            <option value='contractor'>Contractor</option>\n                        </select><br />\n                        <input type='submit' value=\"Login\" />\n                    </form>\n                </div>\n            )\n        }\n    }\n}\n\nexport default LoginForm\n"]},"metadata":{},"sourceType":"module"}