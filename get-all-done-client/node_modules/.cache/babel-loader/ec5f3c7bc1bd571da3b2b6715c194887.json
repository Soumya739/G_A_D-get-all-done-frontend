{"ast":null,"code":"const API_ROOT = `http://localhost:3000/api/v1`;\nconst token = localStorage.getItem('token');\nconst URL = \"http://localhost:3000\";\nlet User_type = \"\";\nconst PostsURL = \"http://localhost:3000/posts\";\nconst User_Posts = \"http://localhost:3000/user_posts\";\nconst headers = {\n  'Content-Type': 'application/json',\n  Accepts: 'application/json',\n  Authorization: localStorage.getItem('token')\n};\n\nconst setCurrentUserType = type => {\n  User_type = type;\n};\n\nconst login = data => {\n  return fetch(`${API_ROOT}/auth`, {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(data)\n  }).then(resp => resp.json());\n};\n\nconst getCurrentUser = () => {\n  return fetch(`${API_ROOT}/current_user`, {\n    headers: headers\n  }).then(handleErrors).then(res => {\n    console.log(res);\n    return res.json();\n  });\n};\n\nconst getcurrentUserType = () => {\n  return User_type;\n};\n\nfunction handleErrors(response) {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n\n  return response;\n}\n\nconst createUser = data => {\n  return fetch(URL + \"/users\", {\n    method: \"POST\",\n    headers: headers,\n    body: JSON.stringify({\n      user: {\n        username: data.username,\n        email: data.email,\n        city: data.city,\n        country: data.country,\n        phone: data.phone,\n        contractee: data.contractee,\n        contractor: data.contractor,\n        password: data.password\n      }\n    })\n  }).then(response => response.json()).then(user => {\n    console.log(user);\n\n    if (user.contractor) {\n      User_type = \"contractor\";\n      return createContractor(user, data);\n    } else {\n      User_type = \"contractee\";\n      return createContractee(user, data);\n    }\n  });\n};\n\nconst createContractor = (user, data) => {\n  console.log(\"creating contractor\");\n  return fetch(URL + \"/contractors\", {\n    method: \"POST\",\n    headers: headers,\n    body: JSON.stringify({\n      user_id: user.id,\n      projects_completed: 0,\n      services: data.services\n    })\n  }).then(handleErrors).then(response => response.json());\n};\n\nconst createContractee = (user, data) => {\n  console.log(\"creating contractee\");\n  return fetch(URL + \"/contractees\", {\n    method: \"POST\",\n    headers: headers,\n    body: JSON.stringify({\n      user_id: user.id\n    })\n  }).then(handleErrors).then(response => response.json());\n};\n\nconst createPost = data => {\n  return fetch(PostsURL, {\n    method: \"POST\",\n    headers: headers,\n    body: JSON.stringify({\n      title: data.title,\n      description: data.description,\n      categories: data.categories\n    })\n  }).then(handleErrors).then(resp => resp.json());\n};\n\nconst fetchPosts = () => {\n  return fetch(User_type === \"contractor\" ? PostsURL : User_Posts, {\n    method: \"POST\",\n    headers: headers\n  }).then(handleErrors).then(resp => resp.json());\n};\n\nexport const api = {\n  auth: {\n    login,\n    getCurrentUser\n  },\n  user: {\n    createUser,\n    getcurrentUserType,\n    setCurrentUserType\n  },\n  posts: {\n    fetchPosts,\n    createPost\n  }\n}; // fetch(URL + \"/users\", {\n//     method: \"POST\",\n//     headers: {\n//         'Content-Type': 'application/json',\n//         Accepts: 'application/json'\n//     },\n//     body: JSON.stringify({\n//         username: username,\n//         email: email,\n//         city: city,\n//         country: country,\n//         phone: phone,\n//         contractee: contractee,\n//         contractor: contractor\n//     })\n// }).then(handleErrors)\n//     .then(response => response.json())\n//     .then(user => {\n//         console.log(user);\n//         if (contractor) {\n//             // createContractor(user, data)\n//             console.log(\"creating contractor\")\n//             fetch(URL + \"/contractors\", {\n//                 method: \"POST\",\n//                 headers: {\n//                     'Content-Type': 'application/json',\n//                     Accepts: 'application/json'\n//                 },\n//                 body: JSON.stringify({\n//                     user_id: user.id,\n//                     projects_completed: 0,\n//                     password: password,\n//                     services: services\n//                 })\n//             })\n//                 .then(handleErrors)\n//                 .then(response => response.json())\n//                 .then(json => {\n//                     console.log(json)\n//                     this.currentUserStatus(\"contractor\")\n//                 })\n//             // .then(currentUser => {\n//             //     onSetCurrentUser(\"contractor\")\n//             // })\n//         } else {\n//             // createContractee(user, data)\n//             console.log(\"creating contractee\")\n//             fetch(URL + \"/contractees\", {\n//                 method: \"POST\",\n//                 headers: {\n//                     'Content-Type': 'application/json',\n//                     Accepts: 'application/json'\n//                 },\n//                 body: JSON.stringify({\n//                     user_id: user.id,\n//                     password: password\n//                 })\n//             }).then(handleErrors)\n//                 .then(response => response.json())\n//                 .then(json => {\n//                     console.log(json)\n//                     this.currentUserStatus(\"contractee\")\n//                 })\n//             //         .then(currentUser => {\n//             //             onSetCurrentUser(\"contractee\")\n//             //         }\n//         }\n//     })","map":{"version":3,"sources":["/Users/flatironschool/Desktop/G_A_D-project/G_A_D-get-all-done-frontend/get-all-done-client/src/services/api.js"],"names":["API_ROOT","token","localStorage","getItem","URL","User_type","PostsURL","User_Posts","headers","Accepts","Authorization","setCurrentUserType","type","login","data","fetch","method","body","JSON","stringify","then","resp","json","getCurrentUser","handleErrors","res","console","log","getcurrentUserType","response","ok","Error","statusText","createUser","user","username","email","city","country","phone","contractee","contractor","password","createContractor","createContractee","user_id","id","projects_completed","services","createPost","title","description","categories","fetchPosts","api","auth","posts"],"mappings":"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","sourcesContent":["const API_ROOT = `http://localhost:3000/api/v1`;\nconst token = localStorage.getItem('token');\nconst URL = \"http://localhost:3000\"\nlet User_type = \"\"\nconst PostsURL = \"http://localhost:3000/posts\"\nconst User_Posts = \"http://localhost:3000/user_posts\"\n\nconst headers = {\n    'Content-Type': 'application/json',\n    Accepts: 'application/json',\n    Authorization: localStorage.getItem('token')\n};\n\nconst setCurrentUserType = (type) => {\n    User_type = type\n}\nconst login = data => {\n    return fetch(`${API_ROOT}/auth`, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify(data)\n    }).then(resp => resp.json());\n};\n\nconst getCurrentUser = () => {\n    return fetch(`${API_ROOT}/current_user`, {\n        headers: headers\n    })\n        .then(handleErrors)\n        .then(res => {\n            console.log(res)\n            return res.json()\n        });\n};\n\nconst getcurrentUserType = () => {\n    return User_type\n}\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText);\n    }\n    return response;\n}\n\nconst createUser = (data) => {\n    return fetch(URL + \"/users\", {\n        method: \"POST\",\n        headers: headers,\n        body: JSON.stringify({\n            user: {\n                username: data.username,\n                email: data.email,\n                city: data.city,\n                country: data.country,\n                phone: data.phone,\n                contractee: data.contractee,\n                contractor: data.contractor,\n                password: data.password\n            }\n        })\n    })\n        .then(response => response.json())\n        .then(user => {\n            console.log(user);\n            if (user.contractor) {\n                User_type = \"contractor\"\n                return createContractor(user, data)\n            } else {\n                User_type = \"contractee\"\n                return createContractee(user, data)\n            }\n        })\n}\n\nconst createContractor = (user, data) => {\n    console.log(\"creating contractor\")\n    return fetch(URL + \"/contractors\", {\n        method: \"POST\",\n        headers: headers,\n        body: JSON.stringify({\n            user_id: user.id,\n            projects_completed: 0,\n            services: data.services\n        })\n    }).then(handleErrors)\n        .then(response => response.json())\n}\n\nconst createContractee = (user, data) => {\n    console.log(\"creating contractee\")\n    return fetch(URL + \"/contractees\", {\n        method: \"POST\",\n        headers: headers,\n        body: JSON.stringify({\n            user_id: user.id\n        })\n    }).then(handleErrors)\n        .then(response => response.json())\n}\n\nconst createPost = (data) => {\n    return fetch(PostsURL, {\n        method: \"POST\",\n        headers: headers,\n        body: JSON.stringify({\n            title: data.title,\n            description: data.description,\n            categories: data.categories\n        })\n    }).then(handleErrors)\n        .then(resp => resp.json())\n}\n\nconst fetchPosts = () => {\n    return fetch(User_type === \"contractor\" ? PostsURL : User_Posts, {\n        method: \"POST\",\n        headers: headers\n    })\n        .then(handleErrors)\n        .then(resp => resp.json())\n}\n\nexport const api = {\n    auth: {\n        login,\n        getCurrentUser\n    },\n    user: {\n        createUser,\n        getcurrentUserType,\n        setCurrentUserType\n    },\n    posts: {\n        fetchPosts,\n        createPost\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// fetch(URL + \"/users\", {\n//     method: \"POST\",\n//     headers: {\n//         'Content-Type': 'application/json',\n//         Accepts: 'application/json'\n//     },\n//     body: JSON.stringify({\n//         username: username,\n//         email: email,\n//         city: city,\n//         country: country,\n//         phone: phone,\n//         contractee: contractee,\n//         contractor: contractor\n//     })\n// }).then(handleErrors)\n//     .then(response => response.json())\n//     .then(user => {\n//         console.log(user);\n//         if (contractor) {\n//             // createContractor(user, data)\n//             console.log(\"creating contractor\")\n//             fetch(URL + \"/contractors\", {\n//                 method: \"POST\",\n//                 headers: {\n//                     'Content-Type': 'application/json',\n//                     Accepts: 'application/json'\n//                 },\n//                 body: JSON.stringify({\n//                     user_id: user.id,\n//                     projects_completed: 0,\n//                     password: password,\n//                     services: services\n//                 })\n//             })\n//                 .then(handleErrors)\n//                 .then(response => response.json())\n//                 .then(json => {\n//                     console.log(json)\n//                     this.currentUserStatus(\"contractor\")\n//                 })\n//             // .then(currentUser => {\n//             //     onSetCurrentUser(\"contractor\")\n//             // })\n\n//         } else {\n//             // createContractee(user, data)\n//             console.log(\"creating contractee\")\n//             fetch(URL + \"/contractees\", {\n//                 method: \"POST\",\n//                 headers: {\n//                     'Content-Type': 'application/json',\n//                     Accepts: 'application/json'\n//                 },\n//                 body: JSON.stringify({\n//                     user_id: user.id,\n//                     password: password\n//                 })\n//             }).then(handleErrors)\n//                 .then(response => response.json())\n//                 .then(json => {\n//                     console.log(json)\n//                     this.currentUserStatus(\"contractee\")\n//                 })\n//             //         .then(currentUser => {\n//             //             onSetCurrentUser(\"contractee\")\n//             //         }\n//         }\n//     })"]},"metadata":{},"sourceType":"module"}